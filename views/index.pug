//- var basepath = basepath

extends layout

block content
  div(class="ui width aligned padded grid")
    div(class="fourteen column")
      h4(class="ui header")
        i(class="blue angle double down icon")
        | Recent blocks
      table(class="ui blue very compact table word-break")
        thead
          tr
            th Number
            th Miner
            th Timestamp
            th # Tx
            th # Uncles
        tbody
          for block in blocks
            tr
              td
                a(href=basepath + "/block/" + block.number) #{block.number}
              td
                a(href=basepath + "/account/" + block.author) #{nameformatter.format(block.author)}
              td #{moment.unix(block.timestamp).format()}
              td #{block.transactions.length}
              td #{block.uncles.length}

  div(class="ui width aligned padded grid")
    div(class="fourteen column")
      h4(class="ui header")
        i(class="blue angle double down icon")
        | Recent Transactions
      if txs.length === 0
        p No transactions during the last 10 blocks
      else
        table(class="ui blue very compact table")
          thead
            tr
              th Hash
              th From
              th To
              th Amount
          tbody
              for tx in txs
                tr
                  td
                    a(href=basepath + "/tx/" + tx.hash) #{tx.hash.substr(0,10)}...
                  td
                    a(href=basepath + "/account/" + tx.from) #{nameformatter.format(tx.from)}
                  td
                    if tx.to
                      a(href=basepath + "/account/" + tx.to) #{nameformatter.format(tx.to)}
                    else
                      | New Contract
                  td #{ethformatter(tx.value)}
                  td
                    tx

  div(class="ui width aligned padded grid")
    div(class="fourteen column")
      h4(class="ui header")
        i(class="blue angle double down icon")
        | Recent ERC-20 Transactions
      table(class="ui blue very compact table")
        thead
          tr
            th Type
            th From
            th To
            th Amount
            th Date
        tbody
          for event in events
            +event_row(event)
